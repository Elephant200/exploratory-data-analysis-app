{% extends "base.html" %}

{% block title %}{{ chat_title }}{% endblock %}

{% block content %}
<div class="container mt-5">
    <h1 class="mb-4">{{ chat_title }}</h1>
    <div class="chat-container p-3 border rounded" id="chat-container">
        <!-- Initial greeting message -->
        <div class="message bot-message show">
            <p>{{ welcome_message }}</p>
        </div>
        <!-- Chat messages will be inserted here -->
    </div>
    <form class="mt-3" hx-post="/chat" hx-target="#chat-container" hx-swap="beforeend" hx-indicator="#typing-indicator">
        <div class="input-group">
            <input type="text" name="message" id="message-input" class="form-control" placeholder="Type your message..." autocomplete="off" required>
            <button class="btn btn-primary" type="submit">Send</button>
        </div>
    </form>
</div>

<template id="typing-indicator">
    <div class="typing-indicator">
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
    </div>
</template>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
<script>
    hljs.highlightAll();
</script>
{% endblock %}